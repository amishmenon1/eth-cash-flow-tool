(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{46:function(e,t,a){e.exports=a.p+"static/media/magnifying-glass-icon.27e342e7.png"},51:function(e,t,a){e.exports=a(88)},56:function(e,t,a){},73:function(e,t,a){},76:function(e,t){},85:function(e,t){},88:function(e,t,a){"use strict";a.r(t);var n=a(3),r=a.n(n),o=a(31),c=a.n(o),l=(a(56),a(2)),s=a.n(l),u=a(20),i=a(7),d=(a(60),a(14)),f=a(46),E=a.n(f),m=(a(73),a(15)),p=a(18),b=function(e){var t=e.onSubmit,a=e.fetchDisabled,o=void 0!==a&&a;console.log("BlockInput component -- render");var c=/^[0-9\b]+$/,l=Object(n.useState)(null),s=Object(i.a)(l,2),u=s[0],d=s[1],f=Object(n.useRef)(),E=Object(n.useRef)(),b=function(e){return!e||c.test(e)?null:"Numbers only"};function v(e){t(parseInt(f.current.value),parseInt(E.current.value))}var h={fetchData:{marginBottom:"10px",marginTop:"10px"},requiredField:{color:"red"}};return r.a.createElement("form",{className:"mb-3",onSubmit:function(e){e.preventDefault(),v()}},r.a.createElement(p.a,null,r.a.createElement(m.a,{md:12},r.a.createElement("label",{htmlFor:"start-block-input",className:"float-left text-muted"},r.a.createElement("b",null,"Start Block")," ",r.a.createElement("b",{style:h.requiredFieldStyle},"*")),r.a.createElement("input",{id:"start-block-input",ref:f,type:"number",onChange:function(e){d(b(e.target.value))},className:"form-control form-control-lg",placeholder:"10305800",required:!0,disabled:!1}))),r.a.createElement(p.a,null,r.a.createElement(m.a,{md:12},r.a.createElement("label",{htmlFor:"end-block-input",className:"float-left text-muted"},r.a.createElement("b",null,"End Block (Optional)")),r.a.createElement("input",{id:"end-block-input",ref:E,type:"number",onChange:function(e){null!==e.target.value&&d(b(e.target.value))},className:"form-control form-control-lg",placeholder:"10305827",required:!1,disabled:!1}))),r.a.createElement(p.a,null,r.a.createElement("div",{role:"alert",style:h.requiredField},u)),r.a.createElement("button",{type:"submit",disabled:o,style:h.fetchData,className:"btn btn-primary btn-block btn-lg"},"Fetch Data!"))},v=a(89),h={IDLE:"idle",PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected",FILTERED:"filtered"},g=r.a.createContext();function T(e,t){switch(console.log("TxContextProvider --- TxReducer --- render"),t.type){case h.IDLE:return console.log("TxContextProvider --- TxReducer --- status: idle"),{status:h.IDLE,data:null,error:null,endStatusCallback:e.endStatusCallback};case h.PENDING:return console.log("TxContextProvider --- TxReducer --- status: pending"),d.toast.warn("Loading all data. This could take a few minutes.",{position:d.toast.POSITION.TOP_RIGHT,autoClose:5e3}),{status:h.PENDING,data:null,error:null,endStatusCallback:e.endStatusCallback};case h.RESOLVED:return console.log("TxContextProvider --- TxReducer --- status: resolved"),d.toast.success("Data successfully loaded.",{position:d.toast.POSITION.TOP_RIGHT,autoClose:5e3}),{status:h.RESOLVED,data:t.data,error:null,endStatusCallback:e.endStatusCallback};case h.REJECTED:return console.log("TxContextProvider --- TxReducer --- status: rejected",t.error),d.toast.error("Failed to fetch: "+t.error,{position:d.toast.POSITION.TOP_RIGHT,autoClose:1e4}),{status:h.REJECTED,data:null,error:t.error,endStatusCallback:e.endStatusCallback};case h.FILTERED:return{status:h.FILTERED,data:t.data,error:null,endStatusCallback:e.endStatusCallback};default:throw console.log("TxContextProvider --- TxReducer --- should not occur"),new Error("Unhandled action type: ".concat(t.type))}}function k(e){var t=e.web3State,a=e.blockInputs,o=e.endStatusCallback,c=Object(n.useReducer)(T,{data:[],status:h.IDLE,endStatusCallback:o}),l=Object(i.a)(c,2),s=l[0],u=l[1];return r.a.createElement(g.Provider,{value:[s,u]},r.a.createElement(ee,{web3State:t}),r.a.createElement(K,{web3State:t,blockInputs:a,endStatusCallback:o}))}var S=a(90),w={SENDER:{text:"Totals by Sender",value:"from"},RECIPIENT:{text:"Totals by Recipient",value:"to"}},O=w.SENDER,x=w.RECIPIENT,y=function(e){var t=e.toggleCallback,a=[O,x],o=Object(n.useRef)();function c(e){var a=e.target;!function(e){var t;e.classList.contains("btn-primary")||(e.classList.toggle("btn-primary"),((t=e).nextSibling?t.nextSibling:t.previousSibling).classList.toggle("btn-primary"))}(a),t(a.value)}return Object(n.useEffect)(function(){o&&o.current.children[1].classList.toggle("btn-primary")},[o]),r.a.createElement(S.a,{style:{paddingTop:"10px",paddingBottom:"20px"},justified:"true",size:"lg",className:"mb-2",ref:o},a.map(function(e){return r.a.createElement(v.a,{id:e.value,style:{height:"35px",fontSize:"inherit"},onClick:c,value:e.value,key:e.value},e.text)}))},C=a(91),R=function(e){var t=e.headers,a=e.data,n=void 0===a?[]:a;console.log("TableDisplay component ---- render");var o={maxHeight:"400px",overflowY:"scroll",marginBottom:"20px"},c={resultsRow:{textAlign:"left"}};return 0===n.length?r.a.createElement("strong",null,"No Records Found."):r.a.createElement("div",null,r.a.createElement(C.a,{striped:!0,bordered:!0,condensed:"true",hover:!0,style:o},r.a.createElement("thead",null,r.a.createElement("tr",null,t.value.map(function(e){return r.a.createElement("th",{key:e},e)}))),r.a.createElement("tbody",null,n.map(function(e){return r.a.createElement("tr",{key:"row-".concat(e.hash),className:"tableRow",style:c.resultsRow},r.a.createElement("td",null,e.address),r.a.createElement("td",null,e.value.toString()))}))))},N=a(21),D=a(23);function I(e){return e||(console.warn("Wallet not detected."),d.toast.warn("Wallet not detected.",{position:d.toast.POSITION.TOP_RIGHT,autoClose:5e3})),new D.a.providers.Web3Provider(e)}function j(){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(s.a.mark(function e(){var t,a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,a=t.ethereum){e.next=6;break}n=!1,e.next=10;break;case 6:return e.next=8,a.request({method:"eth_accounts"});case 8:r=e.sent,n=Boolean(r.length>0);case 10:return e.abrupt("return",{connected:n,accounts:r});case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:case"end":return e.stop()}},e,null,[[0,13]])}))).apply(this,arguments)}function P(){return A.apply(this,arguments)}function A(){return(A=Object(u.a)(s.a.mark(function e(){var t,a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,a=t.ethereum){e.next=5;break}return console.warn("ethereum object not found"),e.abrupt("return");case 5:return e.next=7,a.request({method:"eth_requestAccounts"});case 7:return n=e.sent,r=new D.a.providers.Web3Provider(a),e.abrupt("return",[a,r,n[0]]);case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}},e,null,[[0,12]])}))).apply(this,arguments)}function B(e,t){return function(e,t){return Array.from(Array(t-e+1).keys()).map(function(t){return t+e})}(parseInt(e),parseInt(t))}function _(e,t,a,n){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(s.a.mark(function e(t,a,n,r){var o,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.provider,a&&"0"!==a){e.next=6;break}return e.next=4,o.getBlockNumber();case 4:a=e.sent,console.log("using latest block number: ".concat(a));case 6:return c=[],B(t,a).forEach(function(e){c.push(o.getBlock(e))}),e.abrupt("return",Promise.all(c));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1?arguments[1]:void 0).provider;if(t){var a=function(e){var t=[];return e.forEach(function(e){e&&e.transactions&&(t=[].concat(Object(N.a)(t),Object(N.a)(e.transactions)))}),t}(e),n=[];return a.forEach(function(e){n.push(t.getTransaction(e))}),Promise.all(n)}}var H=function(e){return e.from},V=function(e){return e.to},G=function(e){return"0x"===e};function q(e,t){return e&&e.constructor===Array?e.map(t).filter(function(e){return!!e}):[]}function J(){return(J=Object(u.a)(s.a.mark(function e(t,a){var n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.provider){e.next=3;break}return e.abrupt("return");case 3:return r=[],t.forEach(function(e){r.push(n.getCode(e))}),e.abrupt("return",Promise.all(r));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var M=a(9);var U={SENDER_HEADERS:{id:"SENDER",value:["Sender Address","Total Sent (Wei)"]},RECIPIENT_HEADERS:{id:"RECIPIENT",value:["Recipient Address","Total Received (Wei)"]}},z=w.SENDER,Y=w.RECIPIENT,$=U.SENDER_HEADERS,Q=U.RECIPIENT_HEADERS;var K=function(e){var t=e.web3State,a=e.blockInputs;e.endStatusCallback;console.log("TransactionTable component ---- render");var o=a.startBlock,c=a.endBlock,l=Object(n.useContext)(g),d=Object(i.a)(l,2),f=d[0],E=d[1],m=Object(n.useState)(z),p=Object(i.a)(m,2),b=p[0],T=p[1],k=Object(n.useState)({data:[],headers:$}),S=Object(i.a)(k,2),w=S[0],O=S[1];return Object(n.useEffect)(function(){if(console.log("TransactionsTable useEffect(startBlock, endBlock) --- render --- status: ",f.status),o&&b)return function(){e.apply(this,arguments)}(),function(){console.log("TransactionsTable --- useEffect(startBlock, endBlock) ---- cleanup")};function e(){return(e=Object(u.a)(s.a.mark(function e(){var a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E({type:h.PENDING}),e.next=3,_(o,c,t);case 3:return a=e.sent,e.next=6,W(a,t);case 6:n=e.sent,r=n?h.RESOLVED:h.REJECTED,E({data:n,type:r});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}console.log("TransactionsTable useEffect(startBlock, endBlock) -- base case")},[o,c]),Object(n.useEffect)(function(){if(console.log("TransactionsTable --- useEffect(txData, selectedFilter) --- render"),f.status===h.RESOLVED){var e=function(e,t){return(a=e,n=t,r=[],a.reduce(function(e,t){return e[n]||(e[t[n]]={value:M.a.from("0")},e[t[n]].address=t[n],e[t[n]].hash=t.hash,r.push(e[t[n]])),e[t[n]].value=e[t[n]].value.add(t.value),e},{}),r).filter(function(e){return!!e.address});var a,n,r}(f.data,b.value),t=function(e){return e===z.value?$:Q}(b.value);O({data:e,headers:t})}else console.log("TransactionsTable --- useEffect(txData, selectedFilter) -- base case ")},[f.data,b]),Object(n.useEffect)(function(){console.log("TransactionTable useEffect(status) --- render"),f.status===h.RESOLVED&&f.endStatusCallback()},[f.status]),r.a.createElement(r.a.Fragment,null,f.status===h.RESOLVED&&r.a.createElement(y,{toggleCallback:function(e){T(e===z.value?z:Y)}}),function(e,t){var a=r.a.createElement(v.a,{variant:"link",id:"loader",className:"text-center"},"Loading..."),n={maxHeight:"400px",overflowY:"scroll"};switch(e.status){case h.IDLE:return r.a.createElement("div",null,"*** Submit a block range ***");case h.PENDING:return a;case h.REJECTED:throw new Error("Something went wrong. Please check connection.");case h.RESOLVED:var o=t.data,c=t.headers,l=0===e.data.length,s=e.data.length>0&&0===o.length;return l?r.a.createElement("div",null,"No Records Found."):s?a:r.a.createElement("div",{style:n},r.a.createElement(R,{headers:c,data:o}));case h.FILTERED:return r.a.createElement("div",{style:n},r.a.createElement(R,{headers:c,data:o}));default:throw new Error("This should be impossible")}}(f,w))},X=function(e){var t=e.message;return r.a.createElement(p.a,{className:"centeralign"},r.a.createElement("div",{className:"h3"},"Disclaimer"),r.a.createElement(p.a,null,r.a.createElement("p",null,t)))},Z={TOTAL_ETH_MOVED:{label:"Total Ether transferred (ETH)"},TOTAL_NUM_TRANSACTIONS:{label:"Total # transactions"},TOTAL_NUM_CONTRACT_ADDRESSES:{label:"Total # contract addresses"}},ee=function(e){var t=e.web3State,a=Object(n.useContext)(g),o=Object(i.a)(a,1)[0],c=Object(n.useState)({data:[],totalsLoaded:!1}),l=Object(i.a)(c,2),s=l[0],u=l[1];return Object(n.useEffect)(function(){if(console.log("TotalsPanel component --- useEffect(transactionState) --- render"),o.data&&0!==o.data.length){var e,a,n,r,c,l,s=o.data.length,i=(a=o.data.map(function(e){return e.value}),e=(a.length>0?a.reduce(function(e,t){return e.add(t)}):M.a.from("0")).toString(),D.a.utils.formatEther(e,"Ether"));return(n=o.data,l=n,r=q(l,H),c=function(e){return q(e,V)}(n),function(e,t){return J.apply(this,arguments)}([].concat(Object(N.a)(r),Object(N.a)(c)),t)).then(function(e){var t=e.filter(G).length;u({data:[{label:Z.TOTAL_ETH_MOVED.label,value:i},{label:Z.TOTAL_NUM_TRANSACTIONS.label,value:s},{label:Z.TOTAL_NUM_CONTRACT_ADDRESSES.label,value:t}],totalsLoaded:!0})}),function(){console.log("TotalsPanel --- useEffect(transactionState) --- cleanup"),u({totalsLoaded:!1})}}console.log("TotalsPanel component --- useEffect(transactionState) --- base case")},[o]),s.totalsLoaded&&r.a.createElement("div",{style:{borderColor:"darkblue",border:"double",borderWidth:"thick"}},s.data.map(function(e){return r.a.createElement("p",{key:e.label},r.a.createElement("strong",null,e.label,": "),e.value)}))},te=function(e){var t=e.connectWalletCb;return r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{onClick:t,variant:"primary"},"Connect Wallet"))},ae=function(){console.log("App component -- render");var e=Object(n.useState)({ethereum:null,account:null,provider:null,connected:!1}),t=Object(i.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)({startBlock:null,endBlock:null}),l=Object(i.a)(c,2),f=l[0],v=l[1],h=Object(n.useState)(!1),g=Object(i.a)(h,2),T=g[0],S=g[1];function w(){return(w=Object(u.a)(s.a.mark(function e(){var t,a,n,r,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(o);case 2:t=e.sent,a=Object(i.a)(t,3),n=a[0],r=a[1],c=a[2],o({ethereum:n,provider:r,account:c,connected:!0});case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(n.useEffect)(function(){console.log("App --- useEffect() -- render");var e=window.ethereum,t=I(e);function a(){return(a=Object(u.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j());case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}(function(){return a.apply(this,arguments)})().then(function(a){var n=a.connected,r=a.accounts;if(S(!n),n&&r){var c=n?r[0]:null;o({ethereum:e,provider:t,account:c,connected:n})}})},[]),Object(n.useEffect)(function(){S(!a.connected)},[a.connected]);var O={blockInput:{borderStyle:"outset"},connected:{fontStyle:"italic"}};return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",{className:"App-title"},"Ether Cash Flow"),r.a.createElement("img",{src:E.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",{className:"App-title"},"Block Explorer")),r.a.createElement(d.ToastContainer,null),r.a.createElement(p.a,null,r.a.createElement(m.a,{md:10}),r.a.createElement(m.a,{md:2},a.connected?r.a.createElement("div",{style:O.connected}," ","Wallet Connected: ",a.account.slice(0,3),"...",a.account.slice(-3)):r.a.createElement(te,{connectWalletCb:function(){return w.apply(this,arguments)}})," ")),r.a.createElement(p.a,null,r.a.createElement(m.a,{md:2}),r.a.createElement(m.a,{md:8,style:O.blockInput},r.a.createElement(b,{onSubmit:function(e,t){var a=e!==f.startBlock,n=t!==f.endBlock;(a||n)&&S(!0),v({startBlock:e,endBlock:t})},fetchDisabled:T})),r.a.createElement(m.a,{md:2})),r.a.createElement("br",null),r.a.createElement(p.a,null,r.a.createElement(m.a,{md:2}),r.a.createElement(m.a,{md:8},r.a.createElement(k,{web3State:a,blockInputs:f,endStatusCallback:function(){return S(!1)}})),r.a.createElement(m.a,{md:2})),r.a.createElement("footer",{className:"App-footer",style:{marginTop:"20px"}},r.a.createElement(X,{message:"In order for this app to work successfully, you must have a Metamask or Web3 provider\n          account setup."})))},ne=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function re(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(ae,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/eth-cash-flow-tool",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/eth-cash-flow-tool","/service-worker.js");ne?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):re(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):re(e)})}}()}},[[51,2,1]]]);
//# sourceMappingURL=main.636ba162.chunk.js.map